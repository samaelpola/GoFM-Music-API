version: '3'

services:
    api:
        build:
            dockerfile: build/Dockerfile
            context: .
        image: music-api:latest
        volumes:
            - ./:/app
        ports:
            - "8083:8083"
        env_file:
            - .env
        networks:
            - my_network
        depends_on:
            - minio

    minio:
        image: bitnami/minio:2024.1.18
        ports:
            - "9000:9000"
            - "9001:9001"
        environment:
            MINIO_ROOT_USER: ${ACCESS_ID}
            MINIO_ROOT_PASSWORD: ${SECRET_KEY}
            MINIO_DEFAULT_BUCKETS: ${BUCKET_NAME}
        networks:
            - my_network

networks:
    my_network:
        name: go-fm-network
        driver: bridge
